키워드 정리
https://www.notion.so/SQL-5-459cb3564f00453d907703a061bfdefb
https://www.notion.so/SQL-5-0bd21c2a11a54733b243239c86e83956

**1) 조인 개념정리**

- RDBMS는 중복된 값들로 데이터가 불필요하게 무거워지는 것을 방지하고자 테이블을 분리함
- 필요한 데이터를 보유한 테이블간 연결하여 보는 ‘조인’
- 조인에 참여하는 테이블 간 같은 값을 가진 ‘조인컬럼’이 필요함
- 조인컬럼명이 테이블마다 같을 필요는 없으나 같게 하는게 좋음
- 조인컬럼은 한 개 이상으로 구성될 수 있음

**2) 내부조인 (INNER JOIN)**

- **WHERE절에** 각 테이블 조인컬럼과 연산자 활용해 조건 명시 (다른 일반조건도 같이 써도됨)
- **FROM절에** 조인에 참여하는 테이블을 콤마로 구분하여 명시 (보통 짧은 테이블 별칭 붙여줌)
- **테이블 레이아웃을 아는 것이 중요**. 조인할 수 있는 컬럼이름을 알면 4,5,6…개 테이블 계속 붙여나갈 수 있음 (레이아웃에 대해서는 고객사 담당자에게 물어보고, 담당자도 모르면 유추해서 파악해 나가야함)

**3) 외부조인 (OUTER JOIN)**

- 조인조건 만족하지 않는 상대 테이블 데이터까지 조회하려면 **조인 조건에 (+) 붙이면됨**
- 여러 테이블을 외부조인으로 연결하는 경우 일부 정보가 누락된 데이터도 조회할 수 있으나, 외부조인, 내부조인을 같이 사용하면 다시 누락될 수 있다.
- 외부조인 시 조인조건에 (+)를 붙이는 것은 **오라클 전용 문법**으로, 다른 DBMS에서는 (+) 기호 붙이면 오류 발생
- 조인 컬럼이 여러 개일 경우, 조인조건에서 (+) 기호를 모두 붙여야 제대로 조회됨
- 조인 조건 양쪽에 (+) 기호 붙일 수 없음
- 외부조인시 SELECT문 안에서 불러오는 컬럼이 어떤 테이블에서 오는지에 따라 결과값이 일부 다르게 나오기도 함 (해당 컬럼 자체만 보면 양쪽 테이블의 값이 일치하더라도 다른 컬럼들의 값이 더 나오거나 NA로 들어가는 차이가 있을수 있음)

**4) ANSI 표준문법을 사용한 조인**

- 조인 조건을 WHERE절이 아닌 **FROM절에 기술 (ON 다음에 조건 명시)**
- **FULL OUTER JOIN**은 ANSI문법으로만 사용 가능
- ANSI문법은 다른 DBMS에서도 사용 가능하나 (+) 기호는 오라클 전용

**5) Cartesian Product**

- 조인 조건이 없는 조인. 사용빈도가 낮으므로 복습하며 이해만 하고 넘어갑시다..

**6) 셀프조인 (SELF JOIN)**

- 같은 테이블 안에 있는 정보와 조인할 때 쓰이는 기능. EMPLOYEES 테이블 예제를 봅시다..

**7) 분석함수 (ANALYTIC FUNCTION)**

- 로우별 그룹을 지정해서 집계함수를 적용하는 것은 같으나, GROUP BY절과는 달리 **로우 수는 그대로 두고 집계값 산출이 가능** (비교적 최근에 나온 고급 + 획기적 기능... 그 전까지는 다른 로우의 값을 받아와서 어떤 작업을 하는게 매우 복잡했다)
- **SUM, MAX, MIN, AVG** 등의 일반함수와 **ROW_NUMBER, RANK, DENSE, LAG, LEAD** 등의 함수 사용할 수 있음
- SELECT절에서 OVER(PARTITION BY col1, col2… ORDER BY col1, col2…)와 같이 사용하며 **PARTITION BY가 GROUP BY의 역할**을 함. **ORDER BY 순서도 중요**
- 분석함수 + window절까지 쓰는 경우 order by 다음에 rows/range 추가하여 절, 행 범위 지정할 수 있음 (생략시 전체 행)

        분석함수 OVER (PARTITION BY col1,col2,...
        ORDER BY col1, col2,...
        ROWS(or RANGE) BETWEEN row_func and row_func)

### **질문토의**

**연습문제**

5-2-6
--데이터랑 답안이랑 store_name, staff_name 일부 안맞는게 맞나요?
--TIP. [https://blog.naver.com/dyno_tyno/221483291602](https://blog.naver.com/dyno_tyno/221483291602) ERD 만들어 활용하는법 
   —> ERD 화살표 빨간 네모안의 버튼 누르고 참조할 테이블, 기준 테이블 순서대로 각각 클릭해서 넣을수 있는데 이정도로만 봐도 조인할때 도움될것 같아요!


5-2-8
-- WHERE절에서 DATE를 그냥 'yyyy-mm-dd' 포맷으로 써주면 안되는지.. TO_DATE 써야하는 이유가 있을까요?
   --> 데이터형을 상기 틀에 맞춘 상태로 날짜형으로 변경하기 위함
-- 마지막에 1,3 DESC 기준으로 정렬했는데 order_amt 정렬 안된거 아닌지..
   --> 작성한 쿼리 문제로 다시 살펴보기
